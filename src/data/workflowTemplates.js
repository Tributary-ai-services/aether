/**
 * Workflow templates for the template gallery.
 * Each template provides a pre-built workflow definition that users can customize.
 */

export const workflowTemplateCategories = [
  { id: 'all', label: 'All Templates' },
  { id: 'document_processing', label: 'Document Processing' },
  { id: 'compliance_check', label: 'Compliance' },
  { id: 'approval_chain', label: 'Approvals' },
  { id: 'data_pipeline', label: 'Data Pipelines' },
  { id: 'ai_research', label: 'AI & Research' },
  { id: 'media', label: 'Media & Audio' },
  { id: 'custom', label: 'General' },
];

export const workflowTemplates = [
  {
    id: 'tpl-hello-world',
    name: 'Hello in 25 Languages',
    description: 'A fun starter workflow that asks an LLM to say hello in 25 different languages. Uses a real AI call via the TAS LLM Router and Argo Workflows â€” great for verifying your pipeline works end-to-end. Customize the prompt at runtime or use the default.',
    category: 'custom',
    type: 'custom',
    tags: ['starter', 'hello', 'languages', 'llm', 'example'],
    steps: [
      {
        name: 'Say Hello Worldwide',
        type: 'aiTask',
        template_type: 'container',
        order: 1,
        configuration: {
          aiTaskType: 'llm',
          model: 'gpt-4o-mini',
          prompt: '{{prompt}}',
          maxTokens: 2000,
          temperature: 0.7,
        },
        on_success: 'next',
        on_failure: 'abort',
        timeout: 120,
        retry_count: 1,
      },
      {
        name: 'Deliver Result',
        type: 'sync',
        template_type: 'http',
        order: 2,
        configuration: {
          targets: [
            { type: 'in_app', url: '', include_result: true, message_template: '' },
          ],
          on_exit: true,
        },
        on_success: 'complete',
        on_failure: 'abort',
        timeout: 30,
        retry_count: 1,
      },
    ],
    triggers: [
      {
        type: 'manual',
        name: 'Run Manually',
        configuration: {
          input_parameters: [
            {
              name: 'prompt',
              label: 'LLM Prompt',
              type: 'text',
              description: 'What should the AI do? Edit to customize.',
              required: true,
              default: 'Say "hello" in 25 different languages. For each language, provide the greeting, the language name, and the script/alphabet used. Format as a numbered list. Include a mix of common and uncommon languages. End with a fun fact about greetings around the world.',
            },
          ],
        },
      },
    ],
  },
  {
    id: 'tpl-doc-extract',
    name: 'Document Extraction Pipeline',
    description: 'Fetch a document via HTTP, extract text and metadata with AI (extraction chain), then deliver results. Ideal for ingesting invoices, contracts, or reports.',
    category: 'document_processing',
    type: 'document_processing',
    tags: ['extraction', 'ocr', 'metadata', 'http', 'aiTask'],
    steps: [
      {
        name: 'Fetch Document',
        type: 'http',
        template_type: 'http',
        dependencies: [],
        configuration: {
          url: '{{document_url}}',
          method: 'GET',
          headers: [{ name: 'Accept', value: 'application/json' }],
          successCondition: 'response.statusCode == 200',
        },
        timeout: '5m',
      },
      {
        name: 'Extract Content',
        type: 'aiTask',
        template_type: 'container',
        dependencies: ['fetch-document'],
        configuration: {
          aiTaskType: 'llm',
          chainType: 'extraction',
          model: 'gpt-4o-mini',
          prompt: 'Extract all text content, metadata fields (title, author, date, type), and key entities from this document.',
          systemPrompt: 'You are a document extraction specialist. Return structured JSON with fields: text, metadata: {title, author, date, type}, entities: [{name, type, value}].',
          maxTokens: 4000,
          temperature: 0.1,
        },
        timeout: '10m',
      },
      {
        name: 'Deliver Results',
        type: 'sync',
        template_type: 'http',
        dependencies: ['extract-content'],
        configuration: {
          targets: [{ type: 'in_app', url: '', include_result: true, message_template: '' }],
          on_exit: true,
        },
        timeout: '30s',
      },
    ],
    triggers: [
      {
        type: 'manual',
        name: 'Extract Document',
        configuration: {
          input_parameters: [
            {
              name: 'document_url',
              label: 'Document URL',
              type: 'string',
              description: 'URL of the document to extract (API endpoint or direct file link)',
              required: true,
            },
          ],
        },
      },
    ],
  },
  {
    id: 'tpl-compliance-scan',
    name: 'Compliance Scan',
    description: 'Scan documents for PII and HIPAA violations using parallel AI classification steps, then assemble a compliance report.',
    category: 'compliance_check',
    type: 'compliance_check',
    tags: ['pii', 'hipaa', 'gdpr', 'security', 'parallel', 'classification'],
    steps: [
      {
        name: 'PII Detection',
        type: 'aiTask',
        template_type: 'container',
        dependencies: [],
        configuration: {
          aiTaskType: 'llm',
          chainType: 'classification',
          model: 'gpt-4o-mini',
          prompt: 'Scan the following text for PII (SSN, credit cards, phone numbers, emails, addresses): {{document_text}}',
          systemPrompt: 'You are a PII detection system. Return JSON: {findings: [{type, value, location, severity}], pii_detected: boolean, risk_score: 0-100}.',
          maxTokens: 2000,
          temperature: 0.1,
        },
        timeout: '5m',
      },
      {
        name: 'HIPAA Validation',
        type: 'aiTask',
        template_type: 'container',
        dependencies: [],
        configuration: {
          aiTaskType: 'llm',
          chainType: 'classification',
          model: 'gpt-4o-mini',
          prompt: 'Scan the following text for HIPAA violations (PHI, medical records, patient identifiers): {{document_text}}',
          systemPrompt: 'You are a HIPAA compliance scanner. Return JSON: {findings: [{type, value, location, severity}], phi_detected: boolean, risk_score: 0-100}.',
          maxTokens: 2000,
          temperature: 0.1,
        },
        timeout: '5m',
      },
      {
        name: 'Merge Scan Results',
        type: 'merge',
        dependencies: ['pii-detection', 'hipaa-validation'],
        configuration: {
          mergeMode: 'append',
        },
      },
      {
        name: 'Generate Compliance Report',
        type: 'assembler',
        dependencies: ['merge-scan-results'],
        configuration: {
          output_format: 'markdown',
          assembly_mode: 'ai_summarize',
          instructions: 'Combine PII and HIPAA scan results into a formal compliance report with sections: Executive Summary, PII Findings, HIPAA Findings, Overall Risk Score, Remediation Recommendations.',
        },
        timeout: '5m',
      },
      {
        name: 'Deliver Report',
        type: 'sync',
        template_type: 'http',
        dependencies: ['generate-compliance-report'],
        configuration: {
          targets: [{ type: 'in_app', url: '', include_result: true, message_template: '' }],
          on_exit: true,
          publishResult: true,
        },
        timeout: '30s',
      },
    ],
    triggers: [
      {
        type: 'manual',
        name: 'Run Scan',
        configuration: {
          input_parameters: [
            {
              name: 'document_text',
              label: 'Document Text',
              type: 'text',
              description: 'Paste the document text to scan for compliance violations',
              required: true,
            },
          ],
        },
      },
      {
        type: 'schedule',
        name: 'Daily Scan',
        configuration: {
          cron: '0 2 * * *',
          timezone: 'UTC',
          schedule: {
            frequency: 'daily',
            interval: 1,
            daysOfWeek: [1, 2, 3, 4, 5],
            dayOfMonth: 1,
            lastDay: false,
            time: '02:00',
            timezone: 'UTC',
            starts: '',
            endsType: 'never',
            endsDate: '',
            endsCount: 10,
          },
        },
      },
    ],
  },
  {
    id: 'tpl-approval-chain',
    name: 'Multi-Level Approval',
    description: 'AI pre-screens a document, then routes through two human approval gates (suspend nodes) with escalation. Uses condition to check AI confidence before requiring manual review.',
    category: 'approval_chain',
    type: 'approval_chain',
    tags: ['approval', 'review', 'escalation', 'suspend', 'condition'],
    steps: [
      {
        name: 'AI Pre-Screen',
        type: 'aiTask',
        template_type: 'container',
        dependencies: [],
        configuration: {
          aiTaskType: 'llm',
          chainType: 'classification',
          model: 'gpt-4o-mini',
          prompt: 'Review the following document and assess whether it meets quality standards: {{document_text}}',
          systemPrompt: 'You are a document reviewer. Return JSON: {approved: boolean, confidence: 0-100, issues: [string], summary: string}.',
          maxTokens: 1000,
          temperature: 0.1,
        },
        timeout: '5m',
      },
      {
        name: 'Check Confidence',
        type: 'condition',
        template_type: 'condition',
        dependencies: ['ai-pre-screen'],
        configuration: {
          conditionType: 'expression',
          expression: "{{tasks['ai-pre-screen'].outputs.result}} contains '\"confidence\": 9' || {{tasks['ai-pre-screen'].outputs.result}} contains '\"confidence\": 100'",
        },
      },
      {
        name: 'Team Lead Review',
        type: 'suspend',
        template_type: 'suspend',
        dependencies: ['check-confidence'],
        configuration: {
          duration: '24h',
          message: 'AI pre-screen flagged this document for team lead review. Please approve or reject.',
          approverRole: 'team-lead',
        },
        when: "{{tasks['check-confidence'].outputs.result}} == 'false'",
      },
      {
        name: 'Manager Approval',
        type: 'suspend',
        template_type: 'suspend',
        dependencies: ['team-lead-review'],
        configuration: {
          duration: '48h',
          message: 'Document has passed team lead review. Manager approval required for final sign-off.',
          approverRole: 'manager',
        },
      },
      {
        name: 'Notify Requester',
        type: 'http',
        template_type: 'http',
        dependencies: ['manager-approval'],
        configuration: {
          url: 'http://aether-backend.aether-be.svc.cluster.local:8080/api/v1/notifications/email',
          method: 'POST',
          headers: [{ name: 'Content-Type', value: 'application/json' }],
          body: '{"recipients": ["{{requester_email}}"], "subject": "Approval Complete", "body": "Your document has been approved through all review levels."}',
        },
        timeout: '30s',
      },
    ],
    triggers: [
      {
        type: 'manual',
        name: 'Submit for Approval',
        configuration: {
          input_parameters: [
            {
              name: 'document_text',
              label: 'Document Text',
              type: 'text',
              description: 'The document content to submit for approval',
              required: true,
            },
            {
              name: 'requester_email',
              label: 'Requester Email',
              type: 'string',
              description: 'Email to notify when approval is complete',
              required: true,
            },
            {
              name: 'priority',
              label: 'Priority',
              type: 'select',
              description: 'Approval priority level',
              required: false,
              default: 'normal',
              options: ['low', 'normal', 'high', 'urgent'],
            },
          ],
        },
      },
    ],
  },
  {
    id: 'tpl-ai-summarize',
    name: 'AI Document Summarization',
    description: 'Summarize a document using the AI summarization chain, extract key points via extraction chain, and deliver both results. Demonstrates multiple chain types.',
    category: 'document_processing',
    type: 'document_processing',
    tags: ['ai', 'summary', 'nlp', 'summarization', 'extraction'],
    steps: [
      {
        name: 'Summarize Document',
        type: 'aiTask',
        template_type: 'container',
        dependencies: [],
        configuration: {
          aiTaskType: 'llm',
          chainType: 'summarization',
          model: 'gpt-4o',
          prompt: '{{document_text}}',
          systemPrompt: 'Create a concise executive summary of this document. Include main themes, key arguments, and conclusions.',
          maxTokens: 2000,
          temperature: 0.3,
        },
        timeout: '10m',
      },
      {
        name: 'Extract Key Points',
        type: 'aiTask',
        template_type: 'container',
        dependencies: [],
        configuration: {
          aiTaskType: 'llm',
          chainType: 'extraction',
          model: 'gpt-4o-mini',
          prompt: '{{document_text}}',
          systemPrompt: 'Extract the top 10 key points, facts, and actionable items. Return as JSON: {key_points: [string], facts: [string], action_items: [string]}.',
          maxTokens: 1500,
          temperature: 0.2,
        },
        timeout: '5m',
      },
      {
        name: 'Merge Results',
        type: 'merge',
        dependencies: ['summarize-document', 'extract-key-points'],
        configuration: {
          mergeMode: 'append',
        },
      },
      {
        name: 'Deliver Summary',
        type: 'sync',
        template_type: 'http',
        dependencies: ['merge-results'],
        configuration: {
          targets: [{ type: 'in_app', url: '', include_result: true, message_template: '' }],
          on_exit: true,
        },
        timeout: '30s',
      },
    ],
    triggers: [
      {
        type: 'manual',
        name: 'Summarize',
        configuration: {
          input_parameters: [
            {
              name: 'document_text',
              label: 'Document Text',
              type: 'text',
              description: 'Paste the document text to summarize',
              required: true,
              default: '',
            },
          ],
        },
      },
      {
        type: 'webhook',
        name: 'Webhook',
        configuration: {
          argo_event_source: 'webhook',
          argo_event_name: 'workflow-trigger',
          http_method: 'POST',
          webhook_url: 'http://webhook-eventsource-svc.argo-events:12000/workflow-trigger',
        },
      },
    ],
  },
  {
    id: 'tpl-scheduled-report',
    name: 'Scheduled Compliance Report',
    description: 'Aggregate compliance data via script, analyze with AI, and assemble into a formatted report delivered via sync. Runs on a weekly schedule.',
    category: 'compliance_check',
    type: 'compliance_check',
    tags: ['scheduled', 'report', 'compliance', 'script', 'assembler'],
    steps: [
      {
        name: 'Aggregate Violations',
        type: 'script',
        template_type: 'script',
        dependencies: [],
        configuration: {
          language: 'python',
          source: 'import json\nfrom datetime import datetime, timedelta\n\n# Simulate aggregating compliance data from the last period\nperiod_end = datetime.now().isoformat()\nperiod_start = (datetime.now() - timedelta(days=7)).isoformat()\n\nresult = {\n    "period": {"start": period_start, "end": period_end},\n    "total_scans": 142,\n    "violations_found": 23,\n    "critical": 3,\n    "high": 7,\n    "medium": 8,\n    "low": 5,\n    "categories": {"pii": 12, "hipaa": 6, "gdpr": 5},\n    "top_offenders": ["doc-482", "doc-391", "doc-256"]\n}\nprint(json.dumps(result))',
          image: 'python:3.11-slim',
        },
        timeout: '5m',
      },
      {
        name: 'Analyze Trends',
        type: 'aiTask',
        template_type: 'container',
        dependencies: ['aggregate-violations'],
        configuration: {
          aiTaskType: 'llm',
          chainType: 'completion',
          model: 'gpt-4o-mini',
          prompt: 'Analyze these compliance violation metrics and provide trend analysis, risk assessment, and actionable recommendations.',
          systemPrompt: 'You are a compliance analyst. Provide professional analysis with sections: Trend Analysis, Risk Assessment, Top Concerns, Recommendations.',
          maxTokens: 2000,
          temperature: 0.3,
        },
        timeout: '5m',
      },
      {
        name: 'Assemble Report',
        type: 'assembler',
        dependencies: ['aggregate-violations', 'analyze-trends'],
        configuration: {
          output_format: 'markdown',
          assembly_mode: 'ai_summarize',
          instructions: 'Create a formal weekly compliance report combining the raw violation data and the AI analysis. Include: Executive Summary, Metrics Dashboard, Trend Analysis, Recommendations, and Appendix with raw data.',
        },
        timeout: '5m',
      },
      {
        name: 'Deliver Report',
        type: 'sync',
        template_type: 'http',
        dependencies: ['assemble-report'],
        configuration: {
          targets: [{ type: 'in_app', url: '', include_result: true, message_template: '' }],
          on_exit: true,
          publishResult: true,
        },
        timeout: '30s',
      },
    ],
    triggers: [
      {
        type: 'schedule',
        name: 'Weekly Schedule',
        configuration: {
          cron: '0 8 * * 1',
          timezone: 'UTC',
          schedule: {
            frequency: 'weekly',
            interval: 1,
            daysOfWeek: [1],
            dayOfMonth: 1,
            lastDay: false,
            time: '08:00',
            timezone: 'UTC',
            starts: '',
            endsType: 'never',
            endsDate: '',
            endsCount: 10,
          },
        },
      },
    ],
  },
  {
    id: 'tpl-webhook-processor',
    name: 'Webhook Event Processor',
    description: 'Receive webhook events, validate with a script, transform data, then route based on event type using condition nodes. Uses script, transform, and condition steps.',
    category: 'custom',
    type: 'custom',
    tags: ['webhook', 'api', 'integration', 'script', 'condition', 'transform'],
    steps: [
      {
        name: 'Validate Payload',
        type: 'script',
        template_type: 'script',
        dependencies: [],
        configuration: {
          language: 'python',
          source: 'import json, sys\n\npayload = json.loads("""{{webhook_payload}}""")\n\n# Validate required fields\nrequired = ["id", "type", "data"]\nmissing = [f for f in required if f not in payload]\nif missing:\n    print(json.dumps({"valid": False, "error": f"Missing fields: {missing}"}))\n    sys.exit(1)\n\nprint(json.dumps({"valid": True, "event_type": payload["type"], "event_id": payload["id"], "data": payload["data"]}))',
          image: 'python:3.11-slim',
        },
        timeout: '30s',
      },
      {
        name: 'Extract Event Data',
        type: 'transform',
        template_type: 'data',
        dependencies: ['validate-payload'],
        configuration: {
          transformType: 'jsonpath',
          sourceStep: 'validate-payload',
          sourceParam: 'result',
          jsonpathQuery: '$.{event_type, event_id, data}',
          outputParam: 'result',
        },
      },
      {
        name: 'Check Event Type',
        type: 'condition',
        template_type: 'condition',
        dependencies: ['extract-event-data'],
        configuration: {
          conditionType: 'expression',
          expression: "{{tasks['extract-event-data'].outputs.result}} contains 'document'",
        },
      },
      {
        name: 'Process Document Event',
        type: 'aiTask',
        template_type: 'container',
        dependencies: ['check-event-type'],
        configuration: {
          aiTaskType: 'llm',
          chainType: 'completion',
          model: 'gpt-4o-mini',
          prompt: 'Process this document event and extract relevant information for downstream systems.',
          systemPrompt: 'You are an event processor. Analyze the event data and produce a structured summary.',
          maxTokens: 1000,
          temperature: 0.3,
        },
        when: "{{tasks['check-event-type'].outputs.result}} == 'true'",
        timeout: '5m',
      },
      {
        name: 'Process Other Event',
        type: 'script',
        template_type: 'script',
        dependencies: ['check-event-type'],
        configuration: {
          language: 'python',
          source: 'import json\nevent = json.loads("""{{tasks.extract-event-data.outputs.result}}""")\nprint(json.dumps({"status": "processed", "event_type": event.get("event_type", "unknown"), "action": "logged"}))',
          image: 'python:3.11-slim',
        },
        when: "{{tasks['check-event-type'].outputs.result}} == 'false'",
        timeout: '2m',
      },
      {
        name: 'Deliver Result',
        type: 'sync',
        template_type: 'http',
        dependencies: ['process-document-event', 'process-other-event'],
        configuration: {
          targets: [{ type: 'in_app', url: '', include_result: true, message_template: '' }],
          on_exit: true,
        },
        timeout: '30s',
      },
    ],
    triggers: [
      {
        type: 'webhook',
        name: 'External Webhook',
        configuration: {
          argo_event_source: 'webhook',
          argo_event_name: 'workflow-trigger',
          http_method: 'POST',
          webhook_url: 'http://webhook-eventsource-svc.argo-events:12000/workflow-trigger',
        },
      },
      {
        type: 'manual',
        name: 'Test Manually',
        configuration: {
          input_parameters: [
            {
              name: 'webhook_payload',
              label: 'Webhook JSON Payload',
              type: 'text',
              description: 'Paste a JSON webhook payload to process',
              required: true,
              default: '{"id": "evt-001", "type": "document.created", "data": {"document_id": "doc-123", "title": "Test Document"}}',
            },
          ],
        },
      },
    ],
  },
  {
    id: 'tpl-doc-event-assembly',
    name: 'Document Processing with Assembly',
    description: 'Run parallel AI entity extraction and compliance classification, then assemble both into a formatted report using the assembler node.',
    category: 'document_processing',
    type: 'document_processing',
    tags: ['document_event', 'assembly', 'report', 'extraction', 'classification'],
    steps: [
      {
        name: 'Extract Entities',
        type: 'aiTask',
        template_type: 'container',
        dependencies: [],
        configuration: {
          aiTaskType: 'llm',
          chainType: 'extraction',
          model: 'gpt-4o-mini',
          prompt: 'Extract all entities from this document: {{document_text}}',
          systemPrompt: 'Extract: people, organizations, locations, dates, monetary values, document references. Return as JSON: {entities: [{name, type, context}]}.',
          maxTokens: 3000,
          temperature: 0.1,
        },
        timeout: '10m',
      },
      {
        name: 'Compliance Classification',
        type: 'aiTask',
        template_type: 'container',
        dependencies: [],
        configuration: {
          aiTaskType: 'llm',
          chainType: 'classification',
          model: 'gpt-4o-mini',
          prompt: 'Classify compliance risks in this document: {{document_text}}',
          systemPrompt: 'Classify into: {pii_risk: low|medium|high, phi_risk: low|medium|high, confidentiality: public|internal|confidential|restricted, findings: [{type, severity, description}]}.',
          maxTokens: 2000,
          temperature: 0.1,
        },
        timeout: '5m',
      },
      {
        name: 'Assemble Report',
        type: 'assembler',
        dependencies: ['extract-entities', 'compliance-classification'],
        configuration: {
          output_format: 'markdown',
          assembly_mode: 'ai_summarize',
          instructions: 'Create a comprehensive document analysis report combining entity extraction results and compliance classification. Sections: Executive Summary, Extracted Entities (grouped by type), Compliance Assessment, Risk Rating, Recommendations.',
        },
        timeout: '5m',
      },
      {
        name: 'Deliver Report',
        type: 'sync',
        template_type: 'http',
        dependencies: ['assemble-report'],
        configuration: {
          targets: [{ type: 'in_app', url: '', include_result: true, message_template: '' }],
          on_exit: true,
          publishResult: true,
        },
        timeout: '30s',
      },
    ],
    triggers: [
      {
        type: 'manual',
        name: 'Process Document',
        configuration: {
          input_parameters: [
            {
              name: 'document_text',
              label: 'Document Text',
              type: 'text',
              description: 'Paste document content for entity extraction and compliance analysis',
              required: true,
            },
          ],
        },
      },
      {
        type: 'document_event',
        name: 'Processing Complete',
        configuration: {
          event_type: 'processing.completed',
          notebook_ids: [],
          mime_filter: [],
          output_mode: 'same_notebook',
        },
      },
    ],
  },

  /* ===== New Argo-Native Templates ===== */

  {
    id: 'tpl-batch-scoring',
    name: 'Batch AI Scoring Pipeline',
    description: 'Score a dataset using AI, filter results above a threshold, and export the top items. Uses container, script, AI task, and transform nodes.',
    category: 'data_pipeline',
    type: 'data_pipeline',
    tags: ['batch', 'scoring', 'ai', 'container', 'transform'],
    steps: [
      {
        name: 'Fetch Dataset',
        type: 'container',
        template_type: 'container',
        dependencies: [],
        configuration: {
          image: 'curlimages/curl:8.8.0',
          command: ['sh', '-c'],
          args: ['curl -s $DATA_URL -o /tmp/data.json && cat /tmp/data.json'],
          env: [{ name: 'DATA_URL', value: '{{workflow.parameters.data_url}}' }],
        },
        timeout: '2m',
      },
      {
        name: 'Score Items',
        type: 'aiTask',
        template_type: 'container',
        dependencies: ['fetch-dataset'],
        configuration: {
          aiTaskType: 'llm',
          model: 'gpt-4o-mini',
          prompt: 'Score each item from 0-100 based on relevance. Return JSON array with {id, score}.',
          maxTokens: 4000,
          temperature: 0.3,
        },
        timeout: '10m',
      },
      {
        name: 'Filter Top Results',
        type: 'transform',
        template_type: 'data',
        dependencies: ['score-items'],
        configuration: {
          transformType: 'expression',
          expression: "{{=toJson(filter(fromJson(tasks['score-items'].outputs.result), {asFloat(#.score) >= 80}))}}",
          outputParam: 'result',
        },
      },
      {
        name: 'Export Results',
        type: 'script',
        template_type: 'script',
        dependencies: ['filter-top-results'],
        configuration: {
          language: 'python',
          source: 'import json, sys\ndata = json.loads(sys.argv[1]) if len(sys.argv) > 1 else []\nprint(f"Top {len(data)} items exported")\nwith open("/tmp/results.json", "w") as f:\n    json.dump(data, f, indent=2)',
          image: 'python:3.11-slim',
        },
        timeout: '2m',
      },
    ],
    triggers: [
      {
        type: 'manual',
        name: 'Run Manually',
        configuration: {
          input_parameters: [
            {
              name: 'data_url',
              label: 'Dataset URL',
              type: 'string',
              description: 'URL of the JSON dataset to score',
              required: true,
            },
          ],
        },
      },
    ],
  },
  {
    id: 'tpl-medical-review',
    name: 'Medical Document Review',
    description: 'Process medical documents through compliance scan, AI analysis, and human approval. Demonstrates AI task, condition, and suspend nodes.',
    category: 'compliance_check',
    type: 'compliance_check',
    tags: ['medical', 'hipaa', 'approval', 'ai', 'condition'],
    steps: [
      {
        name: 'Compliance Scan',
        type: 'aiTask',
        template_type: 'container',
        dependencies: [],
        configuration: {
          aiTaskType: 'compliance',
          scan_profile: 'hipaa',
        },
        timeout: '5m',
      },
      {
        name: 'Check Compliance',
        type: 'condition',
        template_type: 'condition',
        dependencies: ['compliance-scan'],
        configuration: {
          conditionType: 'expression',
          expression: "{{tasks['compliance-scan'].outputs.result}} == 'pass'",
        },
      },
      {
        name: 'AI Medical Summary',
        type: 'aiTask',
        template_type: 'container',
        dependencies: ['check-compliance'],
        configuration: {
          aiTaskType: 'llm',
          model: 'gpt-4o',
          prompt: 'Summarize the medical document findings. Highlight key diagnoses, treatments, and follow-up items.',
          systemPrompt: 'You are a medical document analyst. Be thorough and accurate.',
          maxTokens: 3000,
          temperature: 0.2,
        },
        when: "{{tasks['check-compliance'].outputs.result}} == 'true'",
        timeout: '10m',
      },
      {
        name: 'Doctor Approval',
        type: 'suspend',
        template_type: 'suspend',
        dependencies: ['ai-medical-summary'],
        configuration: {
          duration: '72h',
          message: 'Please review the AI-generated medical summary and approve or reject.',
          approverRole: 'physician',
        },
      },
      {
        name: 'Notify Patient',
        type: 'http',
        template_type: 'http',
        dependencies: ['doctor-approval'],
        configuration: {
          url: 'http://aether-backend.aether-be.svc.cluster.local:8080/api/v1/notifications/email',
          method: 'POST',
          headers: [{ name: 'Content-Type', value: 'application/json' }],
          body: '{"recipients": ["{{workflow.parameters.patient_email}}"], "subject": "Your medical review is complete"}',
        },
        timeout: '30s',
      },
    ],
    triggers: [
      {
        type: 'manual',
        name: 'Submit Document',
        configuration: {
          input_parameters: [
            {
              name: 'document_id',
              label: 'Document ID',
              type: 'string',
              description: 'Medical document to review',
              required: true,
            },
            {
              name: 'patient_email',
              label: 'Patient Email',
              type: 'string',
              description: 'Email for notification',
              required: true,
            },
          ],
        },
      },
    ],
  },
  {
    id: 'tpl-data-augmentation',
    name: 'Data Augmentation Pipeline',
    description: 'Fetch data, enrich it with an AI agent, transform the output, and store results. Demonstrates the full container-first workflow.',
    category: 'data_pipeline',
    type: 'data_pipeline',
    tags: ['data', 'enrichment', 'agent', 'transform', 'container'],
    steps: [
      {
        name: 'Fetch Source Data',
        type: 'http',
        template_type: 'http',
        dependencies: [],
        configuration: {
          url: '{{workflow.parameters.source_api}}',
          method: 'GET',
          headers: [{ name: 'Authorization', value: 'Bearer {{workflow.parameters.api_key}}' }],
          successCondition: 'response.statusCode == 200',
        },
        timeout: '30s',
      },
      {
        name: 'Enrich with Agent',
        type: 'aiTask',
        template_type: 'container',
        dependencies: ['fetch-source-data'],
        configuration: {
          aiTaskType: 'agent',
          agentType: 'analysis',
          agentName: 'data-enrichment-agent',
          instructions: 'Analyze each record and add: sentiment score, category classification, and key entity extraction.',
          mcpEnabled: true,
        },
        timeout: '15m',
      },
      {
        name: 'Extract Enriched Fields',
        type: 'transform',
        template_type: 'data',
        dependencies: ['enrich-with-agent'],
        configuration: {
          transformType: 'jsonpath',
          sourceStep: 'enrich-with-agent',
          sourceParam: 'result',
          jsonpathQuery: '$.records[*].{id, original_text, sentiment, category, entities}',
          outputParam: 'result',
        },
      },
      {
        name: 'Store Results',
        type: 'container',
        template_type: 'container',
        dependencies: ['extract-enriched-fields'],
        configuration: {
          image: 'python:3.11-slim',
          command: ['python', '-c'],
          args: ['import json, sys; print(f"Stored {len(json.loads(sys.stdin.read()))} enriched records")'],
          env: [],
        },
        timeout: '2m',
      },
    ],
    triggers: [
      {
        type: 'manual',
        name: 'Run Pipeline',
        configuration: {
          input_parameters: [
            {
              name: 'source_api',
              label: 'Source API URL',
              type: 'string',
              description: 'API endpoint to fetch source data from',
              required: true,
            },
            {
              name: 'api_key',
              label: 'API Key',
              type: 'string',
              description: 'Authentication key for source API',
              required: true,
            },
          ],
        },
      },
    ],
  },
  {
    id: 'tpl-compliance-approval',
    name: 'Compliance Check with Approval Gate',
    description: 'Run a compliance scan, evaluate the score, and require human approval if the score is below threshold. Uses condition and suspend nodes.',
    category: 'compliance_check',
    type: 'compliance_check',
    tags: ['compliance', 'approval', 'condition', 'gate'],
    steps: [
      {
        name: 'Run Compliance Scan',
        type: 'script',
        template_type: 'script',
        dependencies: [],
        configuration: {
          language: 'python',
          source: 'import json\nresult = {"score": 75, "violations": 3, "findings": ["PII detected", "Missing encryption", "Audit log gap"]}\nprint(json.dumps(result))',
          image: 'python:3.11-slim',
        },
        timeout: '5m',
      },
      {
        name: 'Evaluate Score',
        type: 'transform',
        template_type: 'data',
        dependencies: ['run-compliance-scan'],
        configuration: {
          transformType: 'expression',
          expression: "{{=asInt(jsonpath(tasks['run-compliance-scan'].outputs.result, '$.score'))}}",
          outputParam: 'result',
        },
      },
      {
        name: 'Score Check',
        type: 'condition',
        template_type: 'condition',
        dependencies: ['evaluate-score'],
        configuration: {
          conditionType: 'expression',
          expression: "{{tasks['evaluate-score'].outputs.parameters.result}} < 80",
        },
      },
      {
        name: 'Manual Review',
        type: 'suspend',
        template_type: 'suspend',
        dependencies: ['score-check'],
        configuration: {
          duration: '48h',
          message: 'Compliance score is below 80. Please review findings and approve or reject.',
          approverRole: 'compliance-officer',
        },
        when: "{{tasks['score-check'].outputs.result}} == 'true'",
      },
      {
        name: 'Send Report',
        type: 'http',
        template_type: 'http',
        dependencies: ['manual-review'],
        configuration: {
          url: 'http://aether-backend.aether-be.svc.cluster.local:8080/api/v1/notifications/email',
          method: 'POST',
          headers: [{ name: 'Content-Type', value: 'application/json' }],
          body: '{"recipients": ["compliance@company.com"], "subject": "Compliance Report", "body": "Scan complete. Score: {{tasks.evaluate-score.outputs.parameters.result}}"}',
        },
        timeout: '30s',
      },
    ],
    triggers: [
      {
        type: 'schedule',
        name: 'Daily Scan',
        configuration: {
          cron: '0 6 * * *',
          timezone: 'UTC',
          schedule: {
            frequency: 'daily',
            interval: 1,
            daysOfWeek: [1, 2, 3, 4, 5],
            dayOfMonth: 1,
            lastDay: false,
            time: '06:00',
            timezone: 'UTC',
            starts: '',
            endsType: 'never',
            endsDate: '',
            endsCount: 10,
          },
        },
      },
    ],
  },

  /* ===== n8n-Inspired + AI Research Templates ===== */

  {
    id: 'tpl-rag-pipeline',
    name: 'RAG Research Pipeline',
    description: 'Query a vector database for relevant context, augment an LLM prompt with retrieved documents, and generate a research-backed answer. Demonstrates RAG-enabled AI task nodes.',
    category: 'ai_research',
    type: 'custom',
    tags: ['rag', 'vector', 'deeplake', 'research', 'llm'],
    steps: [
      {
        name: 'Research Query',
        type: 'aiTask',
        template_type: 'container',
        dependencies: [],
        configuration: {
          aiTaskType: 'llm',
          chainType: 'completion',
          model: 'gpt-4o-mini',
          prompt: '{{prompt}}',
          systemPrompt: 'You are a research assistant. Reformulate the user query into 3 precise search queries optimized for semantic search.',
          maxTokens: 500,
          temperature: 0.3,
          ragEnabled: false,
        },
        timeout: '2m',
      },
      {
        name: 'RAG-Augmented Answer',
        type: 'aiTask',
        template_type: 'container',
        dependencies: ['research-query'],
        configuration: {
          aiTaskType: 'llm',
          chainType: 'qa',
          model: 'gpt-4o',
          prompt: '{{prompt}}',
          systemPrompt: 'Answer the research question using the retrieved context. Cite sources when possible.',
          maxTokens: 4000,
          temperature: 0.5,
          ragEnabled: true,
          ragDataset: 'default',
          ragTopK: 10,
        },
        timeout: '5m',
      },
      {
        name: 'Summarize Findings',
        type: 'aiTask',
        template_type: 'container',
        dependencies: ['rag-augmented-answer'],
        configuration: {
          aiTaskType: 'llm',
          chainType: 'summarization',
          model: 'gpt-4o-mini',
          prompt: 'Create a concise executive summary of the research findings.',
          systemPrompt: 'You are an expert summarizer.',
          maxTokens: 1000,
          temperature: 0.3,
        },
        timeout: '3m',
      },
      {
        name: 'Deliver Results',
        type: 'sync',
        template_type: 'http',
        dependencies: ['summarize-findings'],
        configuration: {
          targets: [{ type: 'in_app', url: '', include_result: true, message_template: '' }],
          on_exit: true,
        },
        timeout: '30s',
      },
    ],
    triggers: [
      {
        type: 'manual',
        name: 'Run Research',
        configuration: {
          input_parameters: [
            {
              name: 'prompt',
              label: 'Research Question',
              type: 'text',
              description: 'What would you like to research?',
              required: true,
              default: 'What are the key security considerations for deploying LLM applications in enterprise environments?',
            },
          ],
        },
      },
    ],
  },
  {
    id: 'tpl-document-comparison',
    name: 'Document Comparison',
    description: 'Compare two documents in parallel using AI, merge the results, and produce a structured diff report. Uses merge node and parallel branches.',
    category: 'document_processing',
    type: 'document_processing',
    tags: ['comparison', 'diff', 'merge', 'parallel'],
    steps: [
      {
        name: 'Analyze Document A',
        type: 'aiTask',
        template_type: 'container',
        dependencies: [],
        configuration: {
          aiTaskType: 'llm',
          chainType: 'extraction',
          model: 'gpt-4o-mini',
          prompt: 'Extract all key facts, dates, names, and claims from Document A: {{document_a}}',
          systemPrompt: 'Extract structured data as JSON with fields: facts, dates, entities, claims.',
          maxTokens: 3000,
          temperature: 0.2,
        },
        timeout: '5m',
      },
      {
        name: 'Analyze Document B',
        type: 'aiTask',
        template_type: 'container',
        dependencies: [],
        configuration: {
          aiTaskType: 'llm',
          chainType: 'extraction',
          model: 'gpt-4o-mini',
          prompt: 'Extract all key facts, dates, names, and claims from Document B: {{document_b}}',
          systemPrompt: 'Extract structured data as JSON with fields: facts, dates, entities, claims.',
          maxTokens: 3000,
          temperature: 0.2,
        },
        timeout: '5m',
      },
      {
        name: 'Merge Extractions',
        type: 'merge',
        dependencies: ['analyze-document-a', 'analyze-document-b'],
        configuration: {
          mergeMode: 'append',
        },
      },
      {
        name: 'Generate Diff Report',
        type: 'aiTask',
        template_type: 'container',
        dependencies: ['merge-extractions'],
        configuration: {
          aiTaskType: 'llm',
          chainType: 'completion',
          model: 'gpt-4o',
          prompt: 'Compare the two document extractions and produce a detailed diff report. Highlight: additions, removals, contradictions, and agreements.',
          systemPrompt: 'You are a document comparison expert. Be precise and thorough.',
          maxTokens: 4000,
          temperature: 0.3,
        },
        timeout: '5m',
      },
      {
        name: 'Deliver Report',
        type: 'sync',
        template_type: 'http',
        dependencies: ['generate-diff-report'],
        configuration: {
          targets: [{ type: 'in_app', url: '', include_result: true, message_template: '' }],
          on_exit: true,
        },
        timeout: '30s',
      },
    ],
    triggers: [
      {
        type: 'manual',
        name: 'Compare Documents',
        configuration: {
          input_parameters: [
            { name: 'document_a', label: 'Document A Text', type: 'text', description: 'Content of the first document', required: true },
            { name: 'document_b', label: 'Document B Text', type: 'text', description: 'Content of the second document', required: true },
          ],
        },
      },
    ],
  },
  {
    id: 'tpl-multi-language',
    name: 'Multi-Language Translation Pipeline',
    description: 'Translate a document into multiple languages in parallel using a loop node, then merge all translations into a single output.',
    category: 'ai_research',
    type: 'custom',
    tags: ['translation', 'loop', 'merge', 'multilingual'],
    steps: [
      {
        name: 'Translate to Languages',
        type: 'loop',
        dependencies: [],
        configuration: {
          batchSize: 3,
          inputSource: 'parameters',
          inputArray: '["Spanish", "French", "German", "Japanese", "Chinese"]',
        },
      },
      {
        name: 'AI Translate',
        type: 'aiTask',
        template_type: 'container',
        dependencies: ['translate-to-languages'],
        configuration: {
          aiTaskType: 'llm',
          model: 'gpt-4o',
          prompt: 'Translate the following text to {{item.language}}: {{source_text}}',
          systemPrompt: 'You are a professional translator. Provide accurate, natural translations.',
          maxTokens: 4000,
          temperature: 0.3,
        },
        timeout: '5m',
      },
      {
        name: 'Collect Translations',
        type: 'merge',
        dependencies: ['ai-translate'],
        configuration: {
          mergeMode: 'append',
        },
      },
      {
        name: 'Deliver Translations',
        type: 'sync',
        template_type: 'http',
        dependencies: ['collect-translations'],
        configuration: {
          targets: [{ type: 'in_app', url: '', include_result: true, message_template: '' }],
          on_exit: true,
        },
        timeout: '30s',
      },
    ],
    triggers: [
      {
        type: 'manual',
        name: 'Translate',
        configuration: {
          input_parameters: [
            { name: 'source_text', label: 'Text to Translate', type: 'text', description: 'Enter the text to translate', required: true },
          ],
        },
      },
    ],
  },
  {
    id: 'tpl-research-report',
    name: 'Research Report Assembly',
    description: 'Run parallel research tasks (analysis, classification, extraction), then assemble results into a formatted report using the assembler node. Demonstrates the full n8n-inspired pipeline.',
    category: 'ai_research',
    type: 'custom',
    tags: ['research', 'report', 'assembler', 'parallel', 'merge'],
    steps: [
      {
        name: 'Topic Analysis',
        type: 'aiTask',
        template_type: 'container',
        dependencies: [],
        configuration: {
          aiTaskType: 'llm',
          chainType: 'completion',
          model: 'gpt-4o',
          prompt: 'Provide a thorough analysis of: {{topic}}',
          systemPrompt: 'You are a research analyst. Provide detailed, well-structured analysis.',
          maxTokens: 3000,
          temperature: 0.5,
        },
        timeout: '5m',
      },
      {
        name: 'Classify Domain',
        type: 'aiTask',
        template_type: 'container',
        dependencies: [],
        configuration: {
          aiTaskType: 'llm',
          chainType: 'classification',
          model: 'gpt-4o-mini',
          prompt: 'Classify this research topic: {{topic}}',
          systemPrompt: 'Classify into one of: Technology, Science, Business, Policy, Healthcare, Other.',
          maxTokens: 200,
          temperature: 0.1,
        },
        timeout: '2m',
      },
      {
        name: 'Extract Key Entities',
        type: 'aiTask',
        template_type: 'container',
        dependencies: [],
        configuration: {
          aiTaskType: 'llm',
          chainType: 'extraction',
          model: 'gpt-4o-mini',
          prompt: 'Extract key entities from: {{topic}}',
          systemPrompt: 'Extract: people, organizations, technologies, concepts, dates. Return as JSON.',
          maxTokens: 1000,
          temperature: 0.1,
        },
        timeout: '2m',
      },
      {
        name: 'Assemble Report',
        type: 'assembler',
        dependencies: ['topic-analysis', 'classify-domain', 'extract-key-entities'],
        configuration: {
          output_format: 'markdown',
          assembly_mode: 'ai_summarize',
          instructions: 'Combine the analysis, classification, and extracted entities into a comprehensive research report with sections: Executive Summary, Analysis, Classification, Key Entities, Recommendations.',
        },
        timeout: '5m',
      },
      {
        name: 'Deliver Report',
        type: 'sync',
        template_type: 'http',
        dependencies: ['assemble-report'],
        configuration: {
          targets: [{ type: 'in_app', url: '', include_result: true, message_template: '' }],
          on_exit: true,
          publishResult: true,
        },
        timeout: '30s',
      },
    ],
    triggers: [
      {
        type: 'manual',
        name: 'Generate Report',
        configuration: {
          input_parameters: [
            {
              name: 'topic',
              label: 'Research Topic',
              type: 'text',
              description: 'What topic should the report cover?',
              required: true,
              default: 'The impact of large language models on enterprise knowledge management',
            },
          ],
        },
      },
    ],
  },
  {
    id: 'tpl-compliance-audit-with-error',
    name: 'Compliance Audit with Error Recovery',
    description: 'Full compliance audit pipeline with error handling: scan documents, evaluate results, and on failure trigger an error recovery workflow that alerts compliance officers.',
    category: 'compliance_check',
    type: 'compliance_check',
    tags: ['compliance', 'audit', 'error-handler', 'recovery'],
    steps: [
      {
        name: 'Scan Documents',
        type: 'aiTask',
        template_type: 'container',
        dependencies: [],
        configuration: {
          aiTaskType: 'llm',
          chainType: 'extraction',
          model: 'gpt-4o-mini',
          prompt: 'Scan the following document for compliance violations: {{document_text}}',
          systemPrompt: 'You are a compliance scanner. Return JSON: {violations: [{type, severity, description, location}], score: 0-100}',
          maxTokens: 2000,
          temperature: 0.1,
        },
        timeout: '5m',
      },
      {
        name: 'Evaluate Results',
        type: 'condition',
        template_type: 'condition',
        dependencies: ['scan-documents'],
        configuration: {
          conditionType: 'expression',
          expression: "{{tasks['scan-documents'].outputs.result}} contains 'critical'",
        },
      },
      {
        name: 'Generate Audit Report',
        type: 'aiTask',
        template_type: 'container',
        dependencies: ['evaluate-results'],
        configuration: {
          aiTaskType: 'llm',
          chainType: 'summarization',
          model: 'gpt-4o',
          prompt: 'Generate a formal compliance audit report from the scan results.',
          systemPrompt: 'Format as: Executive Summary, Findings, Risk Assessment, Remediation Steps.',
          maxTokens: 3000,
          temperature: 0.3,
        },
        when: "{{tasks['evaluate-results'].outputs.result}} == 'true'",
        timeout: '5m',
      },
      {
        name: 'Error Recovery',
        type: 'errorHandler',
        dependencies: [],
        configuration: {
          errorAction: 'retry_then_notify',
          maxRetries: 2,
          notifyChannels: ['email', 'slack'],
          notifyRecipients: 'compliance-team@company.com',
        },
      },
      {
        name: 'Deliver Audit',
        type: 'sync',
        template_type: 'http',
        dependencies: ['generate-audit-report'],
        configuration: {
          targets: [{ type: 'in_app', url: '', include_result: true, message_template: '' }],
          on_exit: true,
          publishResult: true,
        },
        timeout: '30s',
      },
    ],
    triggers: [
      {
        type: 'manual',
        name: 'Run Audit',
        configuration: {
          input_parameters: [
            { name: 'document_text', label: 'Document Text', type: 'text', description: 'Paste document content for compliance audit', required: true },
          ],
        },
      },
    ],
  },

  // â”€â”€â”€ Media & Audio Templates â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  {
    id: 'tpl-podcast-generator',
    name: 'Podcast Generator',
    description: 'End-to-end podcast creation: an AI agent writes a multi-speaker screenplay-style script from a topic, then the Podcast MCP server synthesizes it into a polished MP3 with multi-voice TTS, intro/outro music, and ambient audio via FFmpeg.',
    category: 'media',
    type: 'media',
    tags: ['podcast', 'tts', 'audio', 'speech', 'media', 'agent', 'ffmpeg'],
    steps: [
      {
        name: 'Generate Script',
        type: 'aiTask',
        template_type: 'container',
        order: 1,
        configuration: {
          aiTaskType: 'llm',
          model: 'gpt-4o-mini',
          systemPrompt: 'You are an expert podcast script writer. Given a topic and optional research notes, generate a natural, engaging podcast script in screenplay format.\n\nRules:\n- Use the format \'SpeakerName: dialogue\' for each line\n- Use the speaker names provided in the input\n- Add stage directions in parentheses: (laughs), (excited), (thoughtful pause)\n- Include natural filler: \'um\', \'you know\', \'right?\'\n- Start with an intro and end with an outro\n- Keep each speaker\'s lines conversational (1-3 sentences)\n- Vary tone: questions, reactions, jokes, insights\n- Output ONLY the screenplay text, no other formatting',
          prompt: 'Create a podcast script about: {{topic}}\nSpeakers: {{speakers}}\n\nAdditional notes and context:\n{{notes}}',
          maxTokens: 4000,
          temperature: 0.85,
        },
        on_success: 'next',
        on_failure: 'abort',
        timeout: 120,
        retry_count: 1,
      },
      {
        name: 'Generate Podcast Audio',
        type: 'http',
        template_type: 'http',
        order: 2,
        dependencies: ['generate-script'],
        configuration: {
          method: 'POST',
          url: 'http://podcast-mcp.tas-mcp-servers.svc.cluster.local:8092/mcp/tools/call',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            name: 'generate_podcast',
            arguments: {
              script: '{{tasks[\'generate-script\'].outputs.result}}',
              voice_mapping: '{{voice_mapping}}',
              provider: '{{tts_provider}}',
              title: '{{topic}}',
              config: {
                intro_music_key: '{{intro_music_key}}',
                outro_music_key: '{{outro_music_key}}',
                ambient_music_key: '{{ambient_music_key}}',
                silence_gap_ms: 500,
              },
            },
          }),
          timeout_seconds: 900,
        },
        on_success: 'next',
        on_failure: 'abort',
        timeout: 900,
        retry_count: 0,
      },
      {
        name: 'Deliver Podcast',
        type: 'sync',
        template_type: 'http',
        order: 3,
        dependencies: ['generate-podcast-audio'],
        configuration: {
          targets: [
            { type: 'in_app', url: '', include_result: true, message_template: 'Your podcast is ready! Download from the URL in the results.' },
          ],
          on_exit: true,
        },
        on_success: 'complete',
        on_failure: 'abort',
        timeout: 30,
        retry_count: 1,
      },
    ],
    triggers: [
      {
        type: 'manual',
        name: 'Generate Podcast',
        configuration: {
          input_parameters: [
            {
              name: 'topic',
              label: 'Podcast Topic',
              type: 'text',
              description: 'The topic or title for the podcast episode (e.g., "How AI is transforming enterprise workflows")',
              required: true,
              default: '',
            },
            {
              name: 'speakers',
              label: 'Speaker Names',
              type: 'text',
              description: 'Comma-separated speaker names (e.g., "Alex, Sam")',
              required: true,
              default: 'Alex, Sam',
            },
            {
              name: 'notes',
              label: 'Research Notes',
              type: 'text',
              description: 'Optional research notes, bullet points, or context for the script writer',
              required: false,
              default: '',
            },
            {
              name: 'voice_mapping',
              label: 'Voice Mapping (JSON)',
              type: 'text',
              description: 'Map speaker names to TTS voice IDs as JSON, e.g. {"Alex": "am_adam", "Sam": "af_bella"} (Kokoro voices)',
              required: true,
              default: '{}',
            },
            {
              name: 'tts_provider',
              label: 'TTS Provider',
              type: 'select',
              description: 'Text-to-speech provider to use',
              required: true,
              default: 'kokoro',
              options: [
                { label: 'Kokoro TTS (Self-hosted)', value: 'kokoro' },
                { label: 'ElevenLabs', value: 'elevenlabs' },
                { label: 'MetaVoice-1B (Self-hosted, GPU)', value: 'metavoice' },
                { label: 'Bark (Self-hosted)', value: 'bark' },
              ],
            },
            {
              name: 'intro_music_key',
              label: 'Intro Music Key',
              type: 'text',
              description: 'MinIO key for intro music in podcast-assets bucket (optional)',
              required: false,
              default: '',
            },
            {
              name: 'outro_music_key',
              label: 'Outro Music Key',
              type: 'text',
              description: 'MinIO key for outro music in podcast-assets bucket (optional)',
              required: false,
              default: '',
            },
            {
              name: 'ambient_music_key',
              label: 'Ambient Music Key',
              type: 'text',
              description: 'MinIO key for ambient background music (optional)',
              required: false,
              default: '',
            },
          ],
        },
      },
    ],
  },
];
